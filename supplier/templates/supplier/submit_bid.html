
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Bid | Supply Chain Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        .action-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #1b5a9b, #4684c3);
            transition: width 0.3s ease;
        }
        .action-link:hover::after {
            width: 100%;
        }
        .dashboard-card {
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #c9dff6 0%, #9cbde5 100%);
        }
        .dashboard-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(36, 74, 115, 0.15);
        }
        .transport-option {
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #ffffff 0%, #c9dff6 100%);
            border: 2px solid #9cbde5;
        }
        .transport-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(107, 158, 211, 0.2);
            border-color: #4684c3;
        }
        .transport-option.selected {
            background: linear-gradient(135deg, #9cbde5 0%, #6a9ed3 100%);
            border-color: #0e447c;
            color: white;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #0e447c 0%, #1b5a9b 50%, #3b699e 100%);
        }
        .section-card {
            background: linear-gradient(135deg, #ffffff 0%, #c9dff6 5%);
            border: 1px solid #9cbde5;
        }
        .input-focus {
            transition: all 0.3s ease;
        }
        .input-focus:focus {
            border-color: #4684c3;
            box-shadow: 0 0 0 3px rgba(70, 132, 195, 0.1);
            background: linear-gradient(135deg, #ffffff 0%, #c9dff6 2%);
        }
        .btn-primary {
            background: linear-gradient(135deg, #0e447c 0%, #1b5a9b 100%);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #244a73 0%, #0e447c 100%);
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(14, 68, 124, 0.3);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #6a9ed3 0%, #4684c3 100%);
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background: linear-gradient(135deg, #4684c3 0%, #3b699e 100%);
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(70, 132, 195, 0.3);
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .route-card {
            background: linear-gradient(135deg, #c9dff6 0%, #9cbde5 50%, #6a9ed3 100%);
            border: 2px solid #4684c3;
        }
        .info-badge {
            background: linear-gradient(135deg, #9cbde5 0%, #6a9ed3 100%);
            color: #0e447c;
            font-weight: 600;
        }
        .pulse-glow {
        animation: pulse-glow 2s infinite;
      }

      @keyframes pulse-glow {
        0%,
        100% {
          box-shadow: 0 0 5px rgba(46, 117, 183, 0.5);
        }
        50% {
          box-shadow: 0 0 20px rgba(46, 117, 183, 0.8),
            0 0 30px rgba(46, 117, 183, 0.4);
        }
      }
    </style>
</head>
<body class="min-h-screen flex flex-col" style="background: linear-gradient(135deg, #c9dff6 0%, #ffffff 50%, #c9dff6 100%);">
    <!-- Navigation -->
     <nav
      style="
        background: linear-gradient(
          135deg,
          #2e75b7,
          #4684c3,
          #afd5ff,
          #6a9ed3,
          #3b699e,
          #1b5a9b
        );
      "
      class="backdrop-blur-lg shadow-md sticky top-0 z-50"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
          <!-- Brand -->
          <div class="flex items-center space-x-3">
            <div
              class="flex items-center justify-center h-12 w-12 rounded-xl pulse-glow"
              style="background: linear-gradient(135deg, #2e75b7, #1b5a9b)"
            >
              <i class="fas fa-link text-white text-2xl"></i>
            </div>
            <h1 class="text-2xl font-bold" style="color: #0a2f56">
              Supply<span style="color: #2e75b7">Chain</span>
            </h1>
          </div>

          <!-- Desktop Menu -->
          <div class="hidden md:flex space-x-8">
            <a
              href="#"
              class="font-medium px-3 py-2 rounded-lg transition-all duration-300 hover:scale-105"
              onmouseover="this.style.background='rgba(76,175,80,0.1)'"
              onmouseout="this.style.background='transparent'"
              >Home</a
            >
            <a
              href="{% url 'about' %}"
              class="font-medium px-3 py-2 rounded-lg transition-all duration-300 hover:scale-105"
              onmouseover="this.style.background='rgba(233,30,99,0.1)'"
              onmouseout="this.style.background='transparent'"
              >About</a
            >
            <a
              href="{% url 'services' %}"
              class="font-medium px-3 py-2 rounded-lg transition-all duration-300 hover:scale-105"
              onmouseover="this.style.background='rgba(156,39,176,0.1)'"
              onmouseout="this.style.background='transparent'"
              >Services</a
            >
            <a
              href="#"
              class="font-medium px-3 py-2 rounded-lg transition-all duration-300 hover:scale-105"
              onmouseover="this.style.background='rgba(0,200,83,0.1)'"
              onmouseout="this.style.background='transparent'"
              >Contact</a
            >
          </div>

          <!-- Mobile Menu Toggle Button -->
          <div class="md:hidden">
            <button
              id="mobile-menu-toggle"
              class="p-2 rounded-lg "
              onmouseover="this.style.background='rgba(255,87,34,0.1)'"
              onmouseout="this.style.background='transparent'"
            >
              <svg
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Mobile Nav -->
      <div
        id="mobile-nav"
        class="md:hidden max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
      >
        <div class="px-4 py-4 space-y-2">
          <a
            href="#"
            class="block px-4 py-2 rounded-lg font-medium hover:bg-green-100"
            >Home</a
          >
          <a
            href="{% url 'about' %}"
            class="block px-4 py-2 rounded-lg font-medium hover:bg-pink-100"
            >About</a
          >
          <a
            href="{% url 'services' %}"
            class="block px-4 py-2 rounded-lg font-medium hover:bg-purple-100"
            >Services</a
          >
          <a
            href="#"
            class="block px-4 py-2 rounded-lg font-medium hover:bg-green-50"
            >Contact</a
          >
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow py-8"style="
        background: linear-gradient(
            45deg,
            #2e75b7,
            #a8d2ff,
            #4684c3,
            #6a9ed3,
            #5ea9ff,
            #1b5a9b
            );
            ">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Breadcrumbs -->
            <div class="flex items-center text-sm mb-8">
                <a href="{% url 'supplier_dashboard' %}" class="text-blue-600 hover:text-blue-800 font-medium transition-colors">
                    <i class="fas fa-home mr-1"></i>Dashboard
                </a>
                <span class="mx-3 text-gray-400">
                    <i class="fas fa-chevron-right"></i>
                </span>
                <span class="font-semibold" style="color: #0e447c;">Submit Bid</span>
            </div>

            <!-- Page Header -->
            <div class="mb-8 gradient-bg rounded-2xl shadow-xl p-8 text-white relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"></div>
                <div class="absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full -ml-12 -mb-12"></div>
                <div class="relative">
                    <h1 class="text-4xl font-bold mb-3">
                        <i class="fas fa-file-contract mr-3"></i>Submit Bid for {{ quote.product }}
                    </h1>
                    <p class="text-blue-100 text-lg">Create your competitive bid with detailed specifications</p>
                </div>
            </div>

            <!-- Quote Overview Card -->
            <div class="section-card rounded-2xl shadow-lg p-8 mb-8">
                <div class="flex items-center mb-6">
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center mr-4">
                        <i class="fas fa-industry text-white text-lg"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold" style="color: #0e447c;">Quote Details</h2>
                        <p class="text-gray-600">Review the requirements before submitting your bid</p>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-xl border-l-4" style="border-color: #4684c3;">
                        <div class="flex items-center">
                            <i class="fas fa-building text-2xl mr-3" style="color: #0e447c;"></i>
                            <div>
                                <p class="text-sm text-gray-600">Manufacturer</p>
                                <p class="font-bold text-lg" style="color: #0e447c;">{{ quote.manufacturer.company_name }}</p>
                                <p class="text-gray-700">{{ quote.manufacturer.city }}, {{ quote.manufacturer.state }}</p>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="info-badge px-4 py-3 rounded-xl text-center">
                            <i class="fas fa-boxes block text-xl mb-1"></i>
                            <p class="text-sm">Quantity</p>
                            <p class="font-bold">{{ quote.quantity }} {{ quote.unit }}</p>
                        </div>
                        <div class="info-badge px-4 py-3 rounded-xl text-center">
                            <i class="fas fa-calendar-alt block text-xl mb-1"></i>
                            <p class="text-sm">Deadline</p>
                            <p class="font-bold">{{ quote.deadline|date:"M d, Y" }}</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-xl">
                    <h4 class="font-semibold mb-2" style="color: #0e447c;">
                        <i class="fas fa-list-ul mr-2"></i>Special Requirements
                    </h4>
                    <p class="text-gray-700">{{ quote.special_requirements|default:"No special requirements specified" }}</p>
                </div>
            </div>

            <!-- Bid Form -->
            <form method="post" id="bid-form" class="space-y-8">
                {% csrf_token %}

                <!-- Pricing Section -->
                <div class="section-card rounded-2xl shadow-lg p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center mr-4">
                            <i class="fas fa-dollar-sign text-white text-lg"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold" style="color: #0e447c;">Pricing Information</h2>
                            <p class="text-gray-600">Enter your competitive bid amount</p>
                        </div>
                    </div>

                    <div class="max-w-md">
                        <label for="id_bid_amount" class="block text-sm font-semibold mb-3" style="color: #244a73;">
                            Your Price ({{ quote.currency }})
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <span class="text-gray-500 sm:text-sm">{{ quote.currency }}</span>
                            </div>
                            {{ form.bid_amount }}
                            {% if form.bid_amount.errors %}
                            <div class="text-red-600 text-sm mt-2 flex items-center">
                                <i class="fas fa-exclamation-circle mr-1"></i>
                                {{ form.bid_amount.errors }}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Transportation Section -->
                <div class="section-card rounded-2xl shadow-lg p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center mr-4">
                            <i class="fas fa-shipping-fast text-white text-lg"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold" style="color: #0e447c;">Transportation Method</h2>
                            <p class="text-gray-600">Choose your preferred shipping method</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div class="transport-option rounded-2xl p-6" data-mode="road">
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-full bg-gradient-to-br from-orange-400 to-orange-500 flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-truck text-white text-2xl"></i>
                                </div>
                                <h3 class="font-bold text-lg mb-2">Road Transport</h3>
                                <p class="text-sm text-gray-600">Reliable ground shipping</p>
                            </div>
                        </div>
                        
                        <div class="transport-option rounded-2xl p-6" data-mode="air">
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-blue-500 flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-plane text-white text-2xl"></i>
                                </div>
                                <h3 class="font-bold text-lg mb-2">Air Transport</h3>
                                <p class="text-sm text-gray-600">Fast air shipping</p>
                            </div>
                        </div>
                    </div>

                    <div style="display: none;">
                        <select id="transport_mode" name="transport_mode" required class="input-focus mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none sm:text-sm rounded-lg">
                            <option value="">Select transportation mode</option>
                            <option value="road">By Road</option>
                            <option value="air">By Air</option>
                        </select>
                    </div>

                    <!-- Road Transport Details -->
                    <div id="road-details" style="display: none;" class="bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl p-6 mt-6 border-l-4 border-orange-400">
                        <h3 class="text-xl font-bold mb-6 flex items-center" style="color: #0e447c;">
                            <i class="fas fa-truck mr-3"></i>Road Transport Configuration
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label for="vehicle_type" class="block text-sm font-semibold mb-2" style="color: #244a73;">Vehicle Type</label>
                                <select id="vehicle_type" name="vehicle_type" class="input-focus mt-1 block w-full pl-3 pr-10 py-3 text-base border-gray-300 focus:outline-none sm:text-sm rounded-lg">
                                    <option value="">Select vehicle type</option>
                                    <option value="small_truck">Small Truck (3.5-7.5 tons)</option>
                                    <option value="medium_truck">Medium Truck (7.5-16 tons)</option>
                                    <option value="large_truck">Large Truck (16-32 tons)</option>
                                    <option value="articulated_truck">Articulated Truck (>32 tons)</option>
                                </select>
                            </div>
                            <div>
                                <label for="vehicle_count" class="block text-sm font-semibold mb-2" style="color: #244a73;">Number of Vehicles</label>
                                <input type="number" id="vehicle_count" name="vehicle_count" min="1" value="1" class="input-focus mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none sm:text-sm">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="load_percentage" class="block text-sm font-semibold mb-2" style="color: #244a73;">Load Percentage (%)</label>
                                <input type="number" id="load_percentage" name="load_percentage" min="1" max="100" value="100" class="input-focus mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none sm:text-sm">
                            </div>
                            <div class="flex items-center h-full pt-8">
                                <label class="inline-flex items-center bg-white rounded-lg p-3 cursor-pointer hover:bg-gray-50 transition-colors">
                                    <input type="checkbox" id="empty_return" name="empty_return" class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                                    <span class="ml-3 font-medium text-gray-700">Empty Return Trip</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Air Transport Details -->
                    <div id="air-details" style="display: none;" class="bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-6 mt-6 border-l-4 border-blue-400">
                        <h3 class="text-xl font-bold mb-6 flex items-center" style="color: #0e447c;">
                            <i class="fas fa-plane mr-3"></i>Air Transport Configuration
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="aircraft_type" class="block text-sm font-semibold mb-2" style="color: #244a73;">Aircraft Type</label>
                                <select id="aircraft_type" name="aircraft_type" class="input-focus mt-1 block w-full pl-3 pr-10 py-3 text-base border-gray-300 focus:outline-none sm:text-sm rounded-lg">
                                    <option value="">Select aircraft type</option>
                                    <option value="cargo_plane">Cargo Plane</option>
                                    <option value="passenger_plane">Passenger Plane (Cargo Hold)</option>
                                </select>
                            </div>
                            <div>
                                <label for="flight_count" class="block text-sm font-semibold mb-2" style="color: #244a73;">Number of Flights</label>
                                <input type="number" id="flight_count" name="flight_count" min="1" value="1" class="input-focus mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none sm:text-sm">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Timing Section -->
                <div class="section-card rounded-2xl shadow-lg p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-500 to-yellow-600 flex items-center justify-center mr-4">
                            <i class="fas fa-clock text-white text-lg"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold" style="color: #0e447c;">Delivery Timeline</h2>
                            <p class="text-gray-600">Specify production and delivery timeframes</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="bg-gradient-to-r from-yellow-50 to-yellow-100 p-6 rounded-xl">
                            <label for="lead_time" class="block text-sm font-semibold mb-3" style="color: #244a73;">
                                <i class="fas fa-cog mr-2"></i>Lead Time (days for production/processing)
                            </label>
                            <input type="number" id="lead_time" name="lead_time" min="0" step="1" required class="input-focus mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none sm:text-sm" >
                            <div class="text-sm text-gray-600 mt-2 flex items-center">
                                <i class="fas fa-info-circle mr-1"></i>
                                Days needed to prepare goods for shipment
                            </div>
                        </div>

                        <div class="bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-xl" >
                            <label for="id_delivery_time" class="block text-sm font-semibold mb-3" style="color: #244a73;">
                                <i class="fas fa-shipping-fast mr-2"></i>Delivery Time (days)
                            </label>
                            {{ form.delivery_time }}
                            {% if form.delivery_time.errors %}
                            <div class="text-red-600 text-sm mt-2 flex items-center">
                                <i class="fas fa-exclamation-circle mr-1"></i>
                                {{ form.delivery_time.errors }}
                            </div>
                            {% endif %}
                            <div class="text-sm text-gray-600 mt-2 flex items-center">
                                <i class="fas fa-calculator mr-1"></i>
                                Calculated automatically after route calculation
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Route Information -->
                <div class="section-card rounded-2xl shadow-lg p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center mr-4">
                            <i class="fas fa-route text-white text-lg"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold" style="color: #0e447c;">Route Planning</h2>
                            <p class="text-gray-600">Review shipping route and calculate delivery time</p>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-indigo-50 to-indigo-100 p-6 rounded-xl mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-full bg-green-500 flex items-center justify-center mr-4">
                                    <i class="fas fa-map-marker-alt text-white"></i>
                                </div>
                                <div>
                                    <span class="block text-sm font-semibold text-gray-700">From:</span>
                                    <span class="font-bold" style="color: #0e447c;">{{ supplier.company_name }}</span>
                                    <p class="text-gray-600 text-sm">{{ supplier.city }}, {{ supplier.state }}</p>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-full bg-red-500 flex items-center justify-center mr-4">
                                    <i class="fas fa-flag text-white"></i>
                                </div>
                                <div>
                                    <span class="block text-sm font-semibold text-gray-700">To:</span>
                                    <span class="font-bold" style="color: #0e447c;">{{ quote.manufacturer.company_name }}</span>
                                    <p class="text-gray-600 text-sm">{{ quote.manufacturer.city }}, {{ quote.manufacturer.state }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="route-results" class="route-card rounded-xl p-6 mb-4">
                        <div class="text-center text-gray-600 py-8">
                            <i class="fas fa-map text-4xl mb-4 text-gray-400"></i>
                            <p class="text-lg font-medium">Select transportation mode and click "Calculate" to see route details</p>
                        </div>
                    </div>

                    <div id="route-loading" style="display: none;" class="bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-xl text-center">
                        <div class="flex items-center justify-center">
                            <svg class="animate-spin h-6 w-6 mr-3" style="color: #4684c3;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <span class="font-medium">Calculating optimal route...</span>
                        </div>
                    </div>

                    <div id="delivery-time-result" class="mt-4"></div>
                    
                    <div class="mt-6">
                        <button type="button" id="calculate-btn" class="btn-secondary text-white py-3 px-8 rounded-xl font-semibold">
                            <i class="fas fa-calculator mr-2"></i>Calculate Route & Delivery Time
                        </button>
                    </div>
                </div>

                   <!-- Additional Information -->
                <div class="section-card rounded-2xl shadow-lg p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500 to-teal-600 flex items-center justify-center mr-4">
                            <i class="fas fa-comment-dots text-white text-lg"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold" style="color: #0e447c;">Additional Information</h2>
                            <p class="text-gray-600">Add any special conditions or notes about your bid</p>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-teal-50 to-teal-100 p-6 rounded-xl">
                        <label for="id_comments" class="block text-sm font-semibold mb-3" style="color: #244a73;">
                            <i class="fas fa-edit mr-2"></i>Comments (Optional)
                        </label>
                        {{ form.comments }}
                        {% if form.comments.errors %}
                        <div class="text-red-600 text-sm mt-2 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>
                            {{ form.comments.errors }}
                        </div>
                        {% endif %}
                        <div class="text-sm text-gray-600 mt-2 flex items-center">
                            <i class="fas fa-info-circle mr-1"></i>
                            Include special requirements, terms, or additional details
                        </div>
                    </div>
                </div>

                <!-- Submit Buttons -->
                <div class="section-card rounded-2xl shadow-lg p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center mr-4">
                            <i class="fas fa-paper-plane text-white text-lg"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold" style="color: #0e447c;">Submit Your Bid</h2>
                            <p class="text-gray-600">Review and submit your competitive proposal</p>
                        </div>
                    </div>

                    <div class="flex flex-col sm:flex-row items-center justify-between">
                        <div class="flex space-x-4 w-full sm:w-auto mb-4 sm:mb-0">
                            <button type="submit" id="submit-btn" class="bg-gradient-to-r from-teal-600 to-teal-700 hover:from-teal-700 hover:to-teal-800 text-white py-3 px-8 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl">
                                <i class="fas fa-paper-plane mr-2"></i>Submit Bid
                            </button>
                        </div>
                        <a href="{% url 'supplier_dashboard' %}" class="text-teal-600 hover:text-teal-800 font-medium flex items-center transition-colors duration-200">
                            <i class="fas fa-arrow-left mr-2"></i>Cancel & Return to Dashboard
                        </a>
                    </div>
                </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
     <footer
      class="text-white py-16 relative"
      style="background: linear-gradient(135deg, #0a2f56 0%, #244a73 100%)"
    >
      <div class="container mx-auto px-4">
        <div class="grid md:grid-cols-4 gap-12 mb-12">
          <div>
            <div class="flex items-center space-x-3 mb-8">
              <div
                class="flex items-center justify-center h-12 w-12 rounded-xl text-white shadow-lg"
                style="
                  background: linear-gradient(135deg, #2e75b7 0%, #4684c3 100%);
                "
              >
                <i class="fas fa-link text-xl"></i>
              </div>
              <h1 class="text-2xl font-bold text-white">
                Supply<span style="color: #9cbde5">Chain</span>
              </h1>
            </div>
            <p class="text-blue-200 mb-6 leading-relaxed">
              Connecting manufacturers and suppliers through innovative
              technology and intelligent solutions.
            </p>
            <div class="flex space-x-4">
              <a
                href="#"
                class="w-10 h-10 rounded-lg flex items-center justify-center transition-all hover:scale-110"
                style="
                  background-color: rgba(156, 189, 229, 0.2);
                  color: #9cbde5;
                "
              >
                <i class="fab fa-twitter"></i>
              </a>
              <a
                href="#"
                class="w-10 h-10 rounded-lg flex items-center justify-center transition-all hover:scale-110"
                style="
                  background-color: rgba(156, 189, 229, 0.2);
                  color: #9cbde5;
                "
              >
                <i class="fab fa-linkedin"></i>
              </a>
              <a
                href="#"
                class="w-10 h-10 rounded-lg flex items-center justify-center transition-all hover:scale-110"
                style="
                  background-color: rgba(156, 189, 229, 0.2);
                  color: #9cbde5;
                "
              >
                <i class="fab fa-facebook"></i>
              </a>
            </div>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-6 text-white">Quick Links</h3>
            <ul class="space-y-3">
              <li>
                <a
                  href="{% url 'home' %}"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>Home</a
                >
              </li>
              <li>
                <a
                  href="{% url 'about' %}"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>About Us</a
                >
              </li>
              <li>
                <a
                  href="{% url 'services' %}"
                  class="text-white flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>Services</a
                >
              </li>
              <li>
                <a
                  href="{% url 'contact' %}"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>Contact</a
                >
              </li>
              <li>
                <a
                  href="{% url 'manufacturer_login' %}"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>Manufacturer
                  Login</a
                >
              </li>
              <li>
                <a
                  href="{% url 'supplier_login' %}"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>Supplier
                  Login</a
                >
              </li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-6 text-white">Support</h3>
            <ul class="space-y-3">
              <li>
                <a
                  href="{% url 'faq' %}"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>FAQ</a
                >
              </li>
              <li>
                <a
                  href="{% url 'help' %}"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>Help
                  Center</a
                >
              </li>
              <li>
                <a
                  href="{% url 'contact' %}"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>Contact
                  Support</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>Live Chat</a
                >
              </li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-6 text-white">Legal</h3>
            <ul class="space-y-3">
              <li>
                <a
                  href="{% url 'terms' %}"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>Terms &
                  Conditions</a
                >
              </li>
              <li>
                <a
                  href="{% url 'privacy' %}"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>Privacy
                  Policy</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>Cookie
                  Policy</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-blue-200 hover:text-white transition-colors duration-300 flex items-center"
                  ><i class="fas fa-chevron-right mr-2 text-xs"></i>GDPR
                  Compliance</a
                >
              </li>
            </ul>
          </div>
        </div>

        <div class="section-divider opacity-30"></div>

        <div class="pt-8 text-center">
          <div class="flex flex-col md:flex-row justify-between items-center">
            <p class="text-blue-200 mb-4 md:mb-0">
              Â© 2024 Supply Chain Portal. All Rights Reserved.
            </p>
            <div class="flex items-center space-x-6 text-sm text-blue-200">
              <span class="flex items-center">
                <i class="fas fa-shield-alt mr-2"></i>
                SSL Secured
              </span>
              <span class="flex items-center">
                <i class="fas fa-award mr-2"></i>
                ISO Certified
              </span>
              <span class="flex items-center">
                <i class="fas fa-clock mr-2"></i>
                24/7 Support
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Background decoration -->
      <div class="absolute top-0 right-0 w-64 h-64 opacity-5">
        <i class="fas fa-cogs text-9xl"></i>
      </div>
      <div class="absolute bottom-0 left-0 w-48 h-48 opacity-5">
        <i class="fas fa-shipping-fast text-8xl"></i>
      </div>
    </footer>

    <script>
        // Store template variables in JavaScript
        const supplierData = {
            companyName: "{{ supplier.company_name|escapejs }}",
            city: "{{ supplier.city|escapejs }}",
            state: "{{ supplier.state|escapejs }}"
        };
        
        const manufacturerData = {
            companyName: "{{ quote.manufacturer.company_name|escapejs }}",
            city: "{{ quote.manufacturer.city|escapejs }}",
            state: "{{ quote.manufacturer.state|escapejs }}"
        };

        document.addEventListener("DOMContentLoaded", function () {
            const transportMode = document.getElementById("transport_mode");
            const transportOptions = document.querySelectorAll(".transport-option");
            const roadDetails = document.getElementById("road-details");
            const airDetails = document.getElementById("air-details");
            const leadTime = document.getElementById("lead_time");
            const calculateBtn = document.getElementById("calculate-btn");
            const routeResults = document.getElementById("route-results");
            const routeLoading = document.getElementById("route-loading");
            const deliveryTimeResult = document.getElementById("delivery-time-result");
            const deliveryTimeInput = document.getElementById("id_delivery_time");
            const submitBtn = document.getElementById("submit-btn");
        const toggleBtn = document.getElementById("mobile-menu-toggle");
        const mobileNav = document.getElementById("mobile-nav");

        toggleBtn.addEventListener("click", () => {
          const isOpen = mobileNav.classList.contains("max-h-[500px]");

          if (isOpen) {
            mobileNav.classList.remove("max-h-[500px]");
            mobileNav.classList.add("max-h-0");
          } else {
            mobileNav.classList.remove("max-h-0");
            mobileNav.classList.add("max-h-[500px]");
          }
        });

        // Optional: Close mobile nav when any link is clicked
        document.querySelectorAll("#mobile-nav a").forEach((link) => {
          link.addEventListener("click", () => {
            mobileNav.classList.remove("max-h-[500px]");
            mobileNav.classList.add("max-h-0");
          });
        });

            // Transport mode selector functionality
            transportOptions.forEach(option => {
                option.addEventListener("click", function() {
                    // Remove selected class from all options
                    transportOptions.forEach(opt => opt.classList.remove("selected"));
                    
                    // Add selected class to clicked option
                    this.classList.add("selected");
                    
                    // Update hidden select field
                    const mode = this.getAttribute("data-mode");
                    transportMode.value = mode;
                    
                    // Trigger change event
                    const event = new Event("change");
                    transportMode.dispatchEvent(event);
                });
            });

            // Show/hide transport details based on selection
            transportMode.addEventListener("change", function () {
                roadDetails.style.display = "none";
                airDetails.style.display = "none";

                if (this.value === "road") {
                    roadDetails.style.display = "block";
                } else if (this.value === "air") {
                    airDetails.style.display = "block";
                }
            });

            // Validate form before submission
            document.getElementById("bid-form").addEventListener("submit", function (e) {
                if (!deliveryTimeInput.value || deliveryTimeInput.value === "0") {
                    e.preventDefault();
                    alert("Please calculate delivery time before submitting your bid");
                    calculateBtn.focus();
                }
            });

            // Calculate route and delivery time
            calculateBtn.addEventListener("click", function () {
                if (!transportMode.value) {
                    alert("Please select transportation mode");
                    return;
                }

                if (!leadTime.value || leadTime.value < 0) {
                    alert("Please enter a valid lead time (0 or more days)");
                    leadTime.focus();
                    return;
                }

                routeLoading.style.display = "block";
                routeResults.innerHTML = "";
                deliveryTimeResult.innerHTML = "";

                // Prepare data for API call
                const data = {
                    supplier_city: supplierData.city,
                    supplier_state: supplierData.state,
                    manufacturer_city: manufacturerData.city,
                    manufacturer_state: manufacturerData.state,
                    transport_mode: transportMode.value,
                    lead_time: leadTime.value
                };

                // Make API call to backend
                fetch('{% url "calculate_route" %}', {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-CSRFToken": document.querySelector("[name=csrfmiddlewaretoken]").value,
                    },
                    body: JSON.stringify(data),
                })
                .then((response) => response.json())
                .then((data) => {
                    routeLoading.style.display = "none";

                    if (!data.success) {
                        routeResults.innerHTML = `
                            <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded">
                                ${data.error || "Error calculating route"}
                            </div>`;
                        return;
                    }

                    if (data.mode === "road") {
                        routeResults.innerHTML = `
                        <div class="text-gray-800">
                            <h4 class="font-semibold text-lg mb-3 text-teal-700">Road Transport Details</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div class="bg-white p-3 rounded-md shadow-sm">
                                    <span class="font-medium block mb-1">Distance:</span>
                                    <span>${data.distance} km</span>
                                </div>
                                <div class="bg-white p-3 rounded-md shadow-sm">
                                    <span class="font-medium block mb-1">Transit Time:</span>
                                    <span>${data.transit_time}</span>
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded-md shadow-sm mb-4">${data.route_summary}</div>
                            <h5 class="font-semibold text-teal-700 mb-2">Directions</h5>
                            <div class="bg-white p-3 rounded-md shadow-sm">
                                ${data.detailed_directions.split("\n").map(
                                    (step) => `<div class="py-1 border-b border-gray-100 last:border-b-0">${step}</div>`
                                ).join("")}
                            </div>
                        </div>
                        `;
                    } else if (data.mode === "air") {
                        routeResults.innerHTML = `
                        <div class="route-details">
                            <h4 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                <i class="fas fa-plane-departure mr-2 text-blue-600"></i> Air Transport Details
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div class="flex items-center">
                                    <i class="fas fa-route mr-2 text-blue-500"></i>
                                    <span><strong>Distance:</strong> ${data.distance} km</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-clock mr-2 text-blue-500"></i>
                                    <span><strong>Transit Time:</strong> ${data.transit_time}</span>
                                </div>
                            </div>
                            <div class="flex items-center mt-3">
                                <i class="fas fa-map-marked-alt mr-2 text-blue-500"></i>
                                <span><strong>Route:</strong> ${data.route_description}</span>
                            </div>
                        </div>
                        `;
                    }

                    deliveryTimeResult.innerHTML = `
                    <div class="flex items-center">
                        <i class="fas fa-hourglass-half mr-2"></i>
                        <span>Total Delivery Time: <strong>${data.total_days} days</strong> (${leadTime.value} days production + ${(data.total_days - parseFloat(leadTime.value)).toFixed(1)} days transit)</span>
                    </div>`;
                    
                    deliveryTimeInput.value = data.delivery_days;
                    submitBtn.disabled = false;
                    
                    // Add success effects
                    deliveryTimeResult.classList.add("pulse-animation");
                    setTimeout(() => {
                        deliveryTimeResult.classList.remove("pulse-animation");
                    }, 2000);
                })
                .catch((error) => {
                    routeLoading.style.display = "none";
                    routeResults.innerHTML = `<div class="error">
                        <i class="fas fa-exclamation-triangle mr-2"></i>
                        Error calculating route: ${error.message}
                    </div>`;
                });
            });
        });
    </script>
</body>
</html>